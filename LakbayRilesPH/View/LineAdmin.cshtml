@using LakbayRilesPH;
@using WebMatrix.Data;
@{

    var currentTime = DateTime.Now;
    var value = false;


    var db = Database.Open("SQLAzureConnection");
    var staff = (Staff)Session["user"];

    var query = "SELECT LineName FROM Line WHERE LineID = @0";
    var result = db.QuerySingle(query, staff.LineHandle);
    var LineName = result["LineName"];
    
     if (IsPost) {

        var announcement = Request.Params["announcement"];
        if (announcement != null)
        {
            var title = Request["title"];
            var message = Request["message"];
            Admin.UpdateDatabase(title, message, staff.LineHandle, "line");
        }
        
     }
        
}
    
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title></title>
    <link href="~/css/bootstrap.css" rel="stylesheet" />
    <script src="~/js/alertStatus.js"></script>
</head>
<body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">

        <!-- THE LAKBAY RILES LOGO -->
        <div class="navbar-header index-navbar"><img src="../images/lakbayrileslogo_s.png" /></div>

        <!-- THE TITLE OF THE VIEW -->
        <h1 class="index-navbar-title navbar-text">STATION SUPERVISOR CONTROL PANEL</h1>

        <!-- THE DATE AND TIME -->
        <p class="navbar-text navbar-right index-navbar-date">Today is @currentTime</p>

    </nav>

    <div class="col-lg-2"></div>

    <div class="col-lg-8">
        <br /><br /><br />

        <div class="row">
            <div class="col-lg-5">
                <div class="tile well" style="background-color:#2c3e50; color:#ffffff; border-radius:15px; height:280px;">
                    <center>
                        <br />
                        <h5><em>Station Supervisor:</em></h5>
                        <h6>@staff.FirstName @staff.LastName</h6>

                        <h5><em>Station Name:</em></h5>
                        <h6>@LineName</h6>
                    </center>
                </div>
            </div>
        </div>

        <div class="col-lg-7">
            <div class="tile well" style="border-radius:15px; background-color:#ffffff; height:280px;">
                <form method="post">
                    <center>
                        <h5><em>Announcements</em></h5>

                        <div class="form-group">
                            @Html.TextBox("title", Request["title"], new { @class = "form-control", @placeholder = "Write the Title of the Announcement" })

                        </div>

                        <div class="form-group">
                            @Html.TextArea("message", Request["message"], new { @class = "form-control", @placeholder = "Write more details about the Announcement" })
                        </div>

                        <div class="form-group">
                            <input type="Submit" name="announcement" class="btn btn-block btn-inverse" id="postAnnouncement" value="Post Announcement" />
                        </div>
                    </center>
                </form>
            </div>
        </div>
    </div>
</body>
</html>
